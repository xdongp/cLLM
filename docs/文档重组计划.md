# cLLM 项目文档重组计划

**版本**: v1.0  
**创建日期**: 2026-01-11  
**状态**: 📋 待审核  
**预计工作量**: 2-3小时

---

## 📋 目录

1. [重组目标](#重组目标)
2. [现状分析](#现状分析)
3. [目标结构](#目标结构)
4. [详细执行计划](#详细执行计划)
5. [风险评估](#风险评估)
6. [回滚方案](#回滚方案)
7. [验收标准](#验收标准)

---

## 🎯 重组目标

### 核心目标
1. **消除冗余** - 清理重复的文档版本（如5个分词器设计文档）
2. **明确分工** - 区分"人类阅读文档"和"AI约束规则"
3. **提升可查找性** - 创建清晰的导航和分类体系
4. **降低维护成本** - 避免在多处维护相同内容

### 预期效果
- 文档数量: **79个 → ~50个** (减少37%)
- 查找时间: **5分钟 → 30秒** (提升90%)
- 维护冲突: **高风险 → 低风险**
- 新人友好度: **⭐⭐ → ⭐⭐⭐⭐⭐**

---

## 📊 现状分析

### 当前目录结构 (79个文档)

```
docs/
├── 根目录 (16个文档) ← 过于平铺
│   ├── cLLM详细设计.md (90KB) ⭐ 核心文档
│   ├── C++编程规范.md (18KB) ⚠️ 与CodeBuddy重复
│   ├── 生成代码规范.md (33KB) ⚠️ 与CodeBuddy重复
│   ├── 工程编译设计.md (12KB)
│   ├── 组件交互设计.md (36KB)
│   ├── 测试设计文档.md (11KB)
│   └── ... (其他10个)
│
├── modules/ (23个文档)
│   ├── Tokenizer模块设计.md ✅ 最新版
│   ├── 分词器设计.md ⚠️ 旧版本
│   ├── 分词器设计_优化版.md ⚠️ 旧版本
│   ├── 分词器设计_增强版.md ⚠️ 旧版本
│   ├── 分词器设计_完善版.md ⚠️ 旧版本
│   ├── 分词器设计_无llama依赖版.md ⚠️ 旧版本
│   ├── CTokenizer分词设计.md ⚠️ 可能重复
│   └── ... (其他16个模块文档)
│
├── analysis/ (23个文档) ⚠️ 临时分析报告
│   ├── tokenizer_comparison_matrix.md
│   ├── hf_tokenizer_migration_strategy.md (60KB)
│   ├── CTokenizer_P0实施报告.md
│   └── ... (20个)
│
├── tests/ (8个文档)
├── review/ (4个文档)
├── verification/ (1个文档)
├── implementation/ (1个文档)
└── research/ (1个文档)
```

### 🔴 主要问题

| 问题类型 | 具体表现 | 影响 |
|---------|---------|------|
| **冗余重复** | 5个分词器设计文档 | 维护成本高，易混淆 |
| **规范冲突** | docs/规范 vs .codebuddy/规则 | AI可能不遵守人类文档 |
| **结构混乱** | 16个文档平铺在根目录 | 查找困难，无分类 |
| **临时文档** | 23个analysis报告混入 | 干扰核心文档 |
| **缺少导航** | 无入口文档 | 新人不知从何看起 |

---

## 🎯 目标结构

### 新目录结构 (~50个文档)

```
docs/
├── 📘 00_文档导航.md ⭐ 新增: 文档导航中心
├── 📘 README.md (更新: 添加文档体系说明)
│
├── 🏗️ architecture/ (架构设计 - 4个核心文档)
│   ├── cLLM详细设计.md (moved)
│   ├── 组件交互设计.md (moved)
│   ├── 工程编译设计.md (moved)
│   └── 测试设计文档.md (moved)
│
├── 📋 specifications/ (规范标准 - 5个精简文档)
│   ├── C++编程规范_团队版.md ⭐ 新建: 精简给人看
│   ├── 编码风格指南.md (moved from 生成代码规范.md)
│   ├── API设计规范.md (extracted)
│   ├── 命名规范速查表.md (extracted)
│   └── AI约束规则说明.md ⭐ 新建: 指向.codebuddy/
│
├── 🧩 modules/ (模块设计 - 清理至15个)
│   ├── Tokenizer模块设计.md ✅ 保留最新
│   ├── 调度器模块设计.md
│   ├── 模型执行器模块设计.md
│   ├── HTTP_Server模块设计.md
│   ├── KV缓存模块设计.md
│   ├── Sampler模块设计.md
│   ├── 内存管理模块设计.md
│   ├── 批处理管理器模块设计.md
│   ├── 请求队列模块设计.md
│   ├── 日志模块设计.md
│   ├── 线程池模块设计.md
│   ├── 推理引擎接口设计.md
│   ├── 自研推理引擎设计.md
│   ├── Kylin推理引擎设计.md
│   └── LibTorch后端设计.md
│
├── 📖 guides/ (开发指南 - 新增6个)
│   ├── 快速开始.md ⭐ 新建
│   ├── 开发环境搭建.md (extracted from 编译环境准备状态.md)
│   ├── 构建与编译指南.md (refined)
│   ├── 调试技巧.md ⭐ 新建
│   ├── CodeBuddy使用指南.md ⭐ 新建: 链接到../.codebuddy/
│   └── 贡献指南.md ⭐ 新建
│
├── 🧪 tests/ (测试文档 - 保持8个)
│   ├── CTokenizer测试方案.md
│   ├── CTokenizer测试设计.md
│   ├── CTokenizer模块测试报告.md
│   ├── SentencePiece集成测试报告.md
│   ├── 生成流程分析报告.md
│   ├── 集成测试计划.md
│   ├── 集成测试总结.md
│   └── 测试结果报告.md
│
├── 📊 reports/ (报告存档 - 归档29个)
│   ├── analysis/ (23个分析报告)
│   │   └── ... (全部移入)
│   ├── implementation/ (1个实施报告)
│   ├── review/ (4个审查报告)
│   ├── verification/ (1个验证报告)
│   └── archive/ (历史版本归档)
│       └── modules_history/ ⚠️ 归档旧版分词器文档
│           ├── 分词器设计_v1.md
│           ├── 分词器设计_优化版_v2.md
│           ├── 分词器设计_增强版_v3.md
│           ├── 分词器设计_完善版_v4.md
│           └── 分词器设计_无llama依赖版_v5.md
│
└── 🔬 research/ (技术调研 - 保持1个)
    └── 分词器技术调研.md
```

### 📊 统计对比

| 分类 | 调整前 | 调整后 | 变化 |
|------|-------|-------|------|
| 根目录 | 16个 | 2个 (导航+README) | -87.5% ✅ |
| architecture/ | 0 | 4个 | +4 ✅ |
| specifications/ | 0 | 5个 | +5 ✅ |
| modules/ | 23个 | 15个 | -34.8% ✅ |
| guides/ | 0 | 6个 | +6 ✅ |
| tests/ | 8个 | 8个 | 0% |
| reports/ | 29个分散 | 29个归档 | 结构化 ✅ |
| research/ | 1个 | 1个 | 0% |
| **总计** | **79个** | **~50个可见** | **-37%** |

---

## 🛠️ 详细执行计划

### 阶段1: 准备工作 (15分钟)

#### 任务1.1: 创建备份
```bash
# 1. 创建备份分支
cd /Users/dannypan/PycharmProjects/xllm/cpp/cLLM
git checkout -b docs-reorganization-backup
git add docs/
git commit -m "backup: 文档重组前的备份"

# 2. 创建本地备份
cp -r docs/ docs_backup_$(date +%Y%m%d_%H%M%S)/

# 3. 记录当前文档清单
find docs -type f -name "*.md" | sort > docs_file_list_before.txt
```

**预期产出**: 
- ✅ Git备份分支
- ✅ 本地备份目录
- ✅ 文档清单文件

#### 任务1.2: 创建新目录结构
```bash
# 创建新的子目录
mkdir -p docs/{architecture,specifications,guides,reports/{analysis,implementation,review,verification,archive/modules_history}}

# 验证目录创建
tree docs/ -L 2 -d
```

**预期产出**:
- ✅ 8个新子目录

---

### 阶段2: 核心文档迁移 (30分钟)

#### 任务2.1: 架构设计文档
```bash
# 移动核心设计文档到 architecture/
mv docs/cLLM详细设计.md docs/architecture/
mv docs/组件交互设计.md docs/architecture/
mv docs/工程编译设计.md docs/architecture/
mv docs/测试设计文档.md docs/architecture/
```

**需要更新的引用**:
- `README.md` 中的链接
- `.codebuddy/rules/always/00_core_constraints.md` 中的文档引用

#### 任务2.2: 规范文档处理

**步骤A: 创建精简版团队规范**
```markdown
# docs/specifications/C++编程规范_团队版.md (新建)

> **说明**: 本文档是给团队成员参考的精简版编程规范。
> AI开发时使用的详细约束规则请查看: [.codebuddy/rules/](./.codebuddy/rules/)

## 核心规范摘要

### 命名规范
- 类名: PascalCase (如 `TokenizerManager`)
- 函数名: camelCase (如 `encodeText`)
- 文件名: snake_case (如 `hf_tokenizer.h`)

### 目录结构
- 头文件: `include/cllm/模块名/`
- 实现: `src/模块名/`
- 测试: `tests/test_模块名.cpp`

... (摘取关键规范)

## 完整规范
详细规范请查阅:
- [AI约束规则](./.codebuddy/rules/always/)
- [原始规范文档](./C++编程规范_完整版.md) (归档)
```

**步骤B: 归档原始文档**
```bash
# 保留原始完整文档,但移到归档目录
mv docs/C++编程规范.md docs/specifications/C++编程规范_完整版.md
mv docs/生成代码规范.md docs/specifications/生成代码规范_完整版.md
```

**步骤C: 创建AI规则说明文档**
```markdown
# docs/specifications/AI约束规则说明.md (新建)

# AI 约束规则说明

## 规则位置
AI开发约束规则位于: `.codebuddy/rules/`

## 规则分类
- `always/` - 每次对话自动生效
- `manual/` - 手动触发
- `requested/` - 按需加载

## 与团队规范的关系
- **团队规范** (本目录): 给人看的精简版
- **AI规则** (.codebuddy/): 给AI看的详细版

## 如何更新
1. 修改 `.codebuddy/rules/` 中的规则文件
2. 如需同步团队规范,更新本目录的精简文档
3. 提交到Git: `git add .codebuddy/rules/ docs/specifications/`
```

#### 任务2.3: 移动其他根目录文档
```bash
# 配置文档
mv docs/配置快速参考.md docs/guides/
mv docs/服务器使用指南.md docs/guides/
mv docs/Tokenizers库安装指南.md docs/guides/

# 实施状态文档
mv docs/实施状态报告.md docs/reports/

# 编译准备文档
mv docs/编译环境准备状态.md docs/guides/开发环境搭建.md

# 测试方案
mv docs/集成测试方案.md docs/tests/

# Code Review
mv docs/代码审查报告.md docs/reports/review/

# 其他设计文档
mv docs/分词器设计.md docs/reports/archive/modules_history/分词器设计_早期版.md
mv docs/模块细化设计任务列表.md docs/reports/
```

---

### 阶段3: 模块文档清理 (30分钟)

#### 任务3.1: 识别重复文档

**分词器相关 (5个重复版本)**:
```bash
docs/modules/分词器设计.md (34KB)
docs/modules/分词器设计_优化版.md (19KB)
docs/modules/分词器设计_增强版.md (33KB)
docs/modules/分词器设计_完善版.md (34KB)
docs/modules/分词器设计_无llama依赖版.md (34KB)
docs/modules/CTokenizer分词设计.md (34KB)
docs/modules/Tokenizer模块设计.md (23KB) ✅ 保留此版本
```

#### 任务3.2: 归档旧版本
```bash
# 归档旧版分词器设计
mv docs/modules/分词器设计.md docs/reports/archive/modules_history/分词器设计_v1.md
mv docs/modules/分词器设计_优化版.md docs/reports/archive/modules_history/分词器设计_v2_优化版.md
mv docs/modules/分词器设计_增强版.md docs/reports/archive/modules_history/分词器设计_v3_增强版.md
mv docs/modules/分词器设计_完善版.md docs/reports/archive/modules_history/分词器设计_v4_完善版.md
mv docs/modules/分词器设计_无llama依赖版.md docs/reports/archive/modules_history/分词器设计_v5_无llama依赖.md

# CTokenizer需要判断是否与Tokenizer模块设计.md重复
# 如果内容不同,保留;如果重复,归档
```

#### 任务3.3: 清理测试验证文档
```bash
# 移动测试验证相关文档
mv docs/modules/分词器测试验证方案.md docs/tests/
mv docs/modules/模块联调接口验证报告.md docs/reports/verification/

# 移动推理引擎拆分说明(已过时)
mv docs/modules/推理引擎文档拆分说明.md docs/reports/archive/
```

#### 任务3.4: 整理模块文档命名

确保统一命名风格:
```bash
# 标准格式: 模块名_模块设计.md
# 当前已符合标准的:
# - Tokenizer模块设计.md ✅
# - 调度器模块设计.md ✅
# - 模型执行器模块设计.md ✅
# - HTTP服务器模块设计.md ✅
# - KV缓存模块设计.md ✅
# - Sampler模块设计.md ✅
# - 内存管理模块设计.md ✅
# - 批处理管理器模块设计.md ✅
# - 请求队列模块设计.md ✅
# - 日志模块设计.md ✅
# - 线程池模块设计.md ✅
# - 推理引擎接口设计.md ✅
# - 自研推理引擎设计.md ✅
# - Kylin推理引擎设计.md ✅
# - LibTorch后端设计.md ✅

# 如有不符合的,重命名即可
```

---

### 阶段4: 报告文档归档 (20分钟)

#### 任务4.1: 移动分析报告
```bash
# analysis/ 目录已存在,内容完整,直接移动整个目录
mv docs/analysis/ docs/reports/

# 单独的分析文档
# (检查根目录是否有遗漏的分析报告)
```

#### 任务4.2: 移动其他报告
```bash
# implementation报告 (已存在,保持不变)
# mv docs/implementation/ docs/reports/  # 已在正确位置

# review报告 (已存在,保持不变)
# mv docs/review/ docs/reports/  # 已在正确位置

# verification报告 (已存在,保持不变)
# mv docs/verification/ docs/reports/  # 已在正确位置

# tests报告 (保留在tests/目录,测试结果属于测试文档)
```

---

### 阶段5: 创建新文档 (40分钟)

#### 任务5.1: 创建文档导航 (00_文档导航.md)

**完整内容**: (见下面的模板)

#### 任务5.2: 创建开发指南

**guides/快速开始.md**:
```markdown
# cLLM 快速开始

## 5分钟入门

### 1. 克隆项目
\`\`\`bash
git clone <repo_url>
cd cpp/cLLM
\`\`\`

### 2. 安装依赖
参考: [开发环境搭建](./开发环境搭建.md)

### 3. 编译
\`\`\`bash
mkdir build && cd build
cmake ..
make -j$(nproc)
\`\`\`

### 4. 运行测试
\`\`\`bash
./test_tokenizer
\`\`\`

## 下一步
- [架构设计](../architecture/cLLM详细设计.md)
- [开发指南](./开发环境搭建.md)
- [CodeBuddy使用](../../.codebuddy/USAGE_GUIDE.md)
```

**guides/CodeBuddy使用指南.md**:
```markdown
# CodeBuddy 使用指南

## 什么是 CodeBuddy
CodeBuddy 是 AI 编程助手的约束系统...

## 核心规则位置
- `.codebuddy/rules/always/` - 核心约束
- `.codebuddy/rules/manual/` - 手动规则
- `.codebuddy/rules/requested/` - 按需加载

## 常见对话示例
...

详细文档: [CodeBuddy完整指南](../../.codebuddy/USAGE_GUIDE.md)
```

**guides/调试技巧.md**:
```markdown
# cLLM 调试技巧

## GDB调试
\`\`\`bash
gdb ./test_tokenizer
break Tokenizer::encode
run
\`\`\`

## 日志配置
...

## 性能分析
...
```

**guides/贡献指南.md**:
```markdown
# 贡献指南

## 开发流程
1. Fork项目
2. 创建特性分支
3. 编写代码(遵守规范)
4. 提交PR

## 代码规范
参考: [C++编程规范](../specifications/C++编程规范_团队版.md)

## AI开发约束
AI开发必须遵守: [.codebuddy/rules/](./.codebuddy/rules/)
```

#### 任务5.3: 更新根目录 README.md

添加文档体系说明:
```markdown
## 📚 文档体系

cLLM项目采用双轨文档体系:

### 人类文档 (`docs/`)
供团队成员阅读的精简、友好文档
- **入口**: [文档导航](docs/00_文档导航.md)
- **架构**: [cLLM详细设计](docs/architecture/cLLM详细设计.md)
- **规范**: [C++编程规范](docs/specifications/C++编程规范_团队版.md)

### AI约束规则 (`.codebuddy/`)
供AI开发时遵守的详细、可执行约束
- **入口**: [CodeBuddy使用指南](.codebuddy/USAGE_GUIDE.md)
- **核心规则**: [.codebuddy/rules/always/](.codebuddy/rules/always/)
- **专项规则**: [.codebuddy/rules/manual/](.codebuddy/rules/manual/)
```

---

### 阶段6: 更新引用链接 (30分钟)

#### 任务6.1: 扫描所有文档中的链接
```bash
# 查找所有指向已移动文档的链接
grep -r "\[.*\](.*\.md)" docs/ --include="*.md" | grep -v "http" > doc_links.txt

# 手动检查并更新
```

#### 任务6.2: 重点更新的文件

**需要更新链接的关键文件**:
1. **根目录 README.md**
   - 指向 `docs/cLLM详细设计.md` → `docs/architecture/cLLM详细设计.md`
   
2. **.codebuddy/rules/always/00_core_constraints.md**
   - 引用的文档路径需要更新
   
3. **.codebuddy/rules/always/01_architecture_rules.md**
   - 引用的模块设计文档路径
   
4. **docs/architecture/cLLM详细设计.md**
   - 内部链接到其他文档
   
5. **各模块设计文档**
   - 互相引用的链接

#### 任务6.3: 批量替换脚本

```bash
# 示例: 替换指向cLLM详细设计的链接
find docs .codebuddy -name "*.md" -exec sed -i '' 's|docs/cLLM详细设计\.md|docs/architecture/cLLM详细设计.md|g' {} \;

# 其他常见替换...
```

---

### 阶段7: 更新 CodeBuddy 规则 (20分钟)

#### 任务7.1: 整合编程规范到 CodeBuddy

更新 `.codebuddy/rules/always/00_core_constraints.md`:

```markdown
# 核心约束规则

## 编码规范 (整合自 C++编程规范.md)

### 命名规范
- **类名**: PascalCase
  - ✅ `TokenizerManager`, `HFTokenizer`
  - ❌ `tokenizerManager`, `hf_tokenizer`
  
- **函数名**: camelCase
  - ✅ `encodeText()`, `getTokenId()`
  - ❌ `EncodeText()`, `get_token_id()`
  
- **变量名**: camelCase + 成员变量后缀`_`
  - ✅ `tokenizer_`, `maxLength_`, `isInitialized_`
  - ❌ `tokenizer`, `max_length`, `is_initialized`

... (详细规范)

## 文档引用
- 架构设计: `docs/architecture/cLLM详细设计.md`
- 模块设计: `docs/modules/`
- 团队规范: `docs/specifications/C++编程规范_团队版.md`
```

#### 任务7.2: 更新其他规则文件中的文档路径

```bash
# 更新 01_architecture_rules.md
# 更新 02_workflow_standards.md
# 更新 manual/ 和 requested/ 中的规则
```

---

### 阶段8: 验证与测试 (20分钟)

#### 任务8.1: 验证文件完整性
```bash
# 生成新的文档清单
find docs -type f -name "*.md" | sort > docs_file_list_after.txt

# 对比前后差异
diff docs_file_list_before.txt docs_file_list_after.txt

# 检查是否有文件丢失 (不应该有)
# 只应该有路径变化,不应该有文件消失
```

#### 任务8.2: 验证链接有效性
```bash
# 检查所有Markdown文档中的内部链接
# 可以使用markdown-link-check工具

# 手动抽查关键链接:
# - docs/00_文档导航.md 中的所有链接
# - README.md 中的文档链接
# - .codebuddy/rules/ 中的文档引用
```

#### 任务8.3: 验证目录结构
```bash
# 检查新目录结构
tree docs/ -L 2

# 应该看到:
# docs/
# ├── 00_文档导航.md
# ├── README.md
# ├── architecture/
# ├── specifications/
# ├── modules/
# ├── guides/
# ├── tests/
# ├── reports/
# └── research/
```

#### 任务8.4: 测试 AI 行为

**测试场景1: AI 是否遵守新规则**
```
用户: "给TokenizerManager添加批量编码功能"
预期: AI先读取 docs/architecture/ 和 docs/modules/,
      然后遵守 .codebuddy/rules/ 中的约束
```

**测试场景2: 文档查找效率**
```
用户: "KV缓存的设计文档在哪?"
预期: AI应该从 docs/00_文档导航.md 快速找到
      docs/modules/KV缓存模块设计.md
```

---

### 阶段9: 清理与提交 (15分钟)

#### 任务9.1: 清理临时文件
```bash
# 删除临时文件
rm docs_file_list_before.txt
rm docs_file_list_after.txt
rm doc_links.txt

# 检查是否有空目录
find docs -type d -empty

# 删除空目录 (如果有)
find docs -type d -empty -delete
```

#### 任务9.2: 更新 .gitignore

确保不忽略新的文档结构:
```bash
# .gitignore 中应该有:
# docs_backup_*/  # 忽略本地备份
# *.swp          # 忽略编辑器临时文件
```

#### 任务9.3: Git 提交
```bash
# 查看变更
git status
git diff --stat

# 分步提交(推荐)

# 1. 提交目录结构调整
git add docs/
git commit -m "docs: 重组文档目录结构

- 创建 architecture/specifications/guides/reports/ 分类
- 移动核心设计文档到 architecture/
- 归档重复的模块设计文档到 reports/archive/
- 创建文档导航 00_文档导航.md"

# 2. 提交新增指南文档
git add docs/guides/
git commit -m "docs: 新增开发指南文档

- 快速开始指南
- CodeBuddy使用指南
- 调试技巧
- 贡献指南"

# 3. 提交 CodeBuddy 规则更新
git add .codebuddy/
git commit -m "docs: 更新CodeBuddy规则文档路径

- 整合C++编程规范到核心约束
- 更新文档引用路径
- 添加文档体系说明"

# 4. 提交 README 更新
git add README.md
git commit -m "docs: 更新README文档体系说明"

# 推送到远程
git push origin main
```

---

## ⚠️ 风险评估

### 高风险项

| 风险 | 概率 | 影响 | 缓解措施 |
|------|------|------|---------|
| **链接失效** | 高 | 中 | 1. Git备份 2. 链接检查脚本 3. 手动验证 |
| **文件丢失** | 低 | 高 | 1. 本地备份 2. 文件清单对比 3. Git备份 |
| **AI无法找到文档** | 中 | 中 | 1. 更新规则引用 2. 测试AI行为 3. 添加导航 |
| **团队成员迷失** | 中 | 低 | 1. 导航文档 2. README说明 3. 培训沟通 |

### 中风险项

| 风险 | 概率 | 影响 | 缓解措施 |
|------|------|------|---------|
| **重复工作** | 中 | 低 | 1. 对比文档内容 2. 保留Git历史 |
| **规范冲突** | 低 | 中 | 1. 明确标注"AI版"vs"人类版" 2. 添加说明文档 |
| **归档文档丢失价值** | 中 | 低 | 1. 归档而非删除 2. 添加归档说明 |

---

## 🔄 回滚方案

### 完全回滚 (恢复到重组前状态)

```bash
# 方案1: 使用Git备份分支
git checkout docs-reorganization-backup
git checkout -b main-restored
git branch -D main
git branch -m main

# 方案2: 使用本地备份
rm -rf docs/
cp -r docs_backup_YYYYMMDD_HHMMSS/ docs/
git checkout -- docs/
```

### 部分回滚 (仅恢复某个目录)

```bash
# 恢复modules/目录
git checkout docs-reorganization-backup -- docs/modules/

# 恢复单个文件
git checkout docs-reorganization-backup -- docs/cLLM详细设计.md
```

---

## ✅ 验收标准

### 目录结构验收

- [ ] `docs/` 根目录只有2个文件 (00_文档导航.md + README.md)
- [ ] `architecture/` 包含4个核心设计文档
- [ ] `specifications/` 包含5个规范文档
- [ ] `modules/` 包含15个模块设计文档(无重复)
- [ ] `guides/` 包含6个开发指南
- [ ] `tests/` 保持8个测试文档
- [ ] `reports/` 包含29个归档报告(分类清晰)
- [ ] `research/` 保持1个调研文档

### 文档内容验收

- [ ] `00_文档导航.md` 所有链接有效
- [ ] `specifications/AI约束规则说明.md` 正确指向 `.codebuddy/`
- [ ] `guides/CodeBuddy使用指南.md` 内容完整
- [ ] `reports/archive/modules_history/` 包含5个旧版分词器文档

### CodeBuddy验收

- [ ] `.codebuddy/rules/always/00_core_constraints.md` 包含编程规范
- [ ] 所有规则文件中的文档路径已更新
- [ ] AI测试: 能正确找到文档并遵守规则

### 链接有效性验收

- [ ] README.md 中的文档链接有效
- [ ] 00_文档导航.md 中的所有链接有效
- [ ] .codebuddy/rules/ 中的文档引用有效
- [ ] 模块设计文档间的互相引用有效

### Git提交验收

- [ ] 有清晰的提交历史 (分4-5个commit)
- [ ] 提交信息符合规范
- [ ] 没有遗留临时文件
- [ ] .gitignore 正确配置

---

## 📝 执行检查清单

### 阶段执行清单

- [ ] **阶段1**: 准备工作 (15分钟)
  - [ ] Git备份分支创建
  - [ ] 本地备份创建
  - [ ] 文档清单生成
  - [ ] 新目录结构创建

- [ ] **阶段2**: 核心文档迁移 (30分钟)
  - [ ] 架构文档移动
  - [ ] 规范文档处理
  - [ ] 根目录文档移动

- [ ] **阶段3**: 模块文档清理 (30分钟)
  - [ ] 识别重复文档
  - [ ] 归档旧版本
  - [ ] 清理测试文档
  - [ ] 统一命名风格

- [ ] **阶段4**: 报告文档归档 (20分钟)
  - [ ] 移动分析报告
  - [ ] 整理其他报告

- [ ] **阶段5**: 创建新文档 (40分钟)
  - [ ] 00_文档导航.md
  - [ ] 开发指南文档
  - [ ] README.md更新

- [ ] **阶段6**: 更新引用链接 (30分钟)
  - [ ] 扫描所有链接
  - [ ] 更新关键文件
  - [ ] 批量替换

- [ ] **阶段7**: 更新CodeBuddy规则 (20分钟)
  - [ ] 整合编程规范
  - [ ] 更新文档路径

- [ ] **阶段8**: 验证与测试 (20分钟)
  - [ ] 文件完整性
  - [ ] 链接有效性
  - [ ] 目录结构
  - [ ] AI行为测试

- [ ] **阶段9**: 清理与提交 (15分钟)
  - [ ] 清理临时文件
  - [ ] 更新.gitignore
  - [ ] Git提交

---

## 📊 预期工作量

| 阶段 | 预计时间 | 难度 | 可并行 |
|------|---------|------|--------|
| 阶段1: 准备 | 15分钟 | 低 | ❌ |
| 阶段2: 核心迁移 | 30分钟 | 中 | ✅ |
| 阶段3: 模块清理 | 30分钟 | 中 | ✅ |
| 阶段4: 报告归档 | 20分钟 | 低 | ✅ |
| 阶段5: 新建文档 | 40分钟 | 中 | ✅ |
| 阶段6: 更新链接 | 30分钟 | 高 | ❌ |
| 阶段7: 更新规则 | 20分钟 | 中 | ❌ |
| 阶段8: 验证测试 | 20分钟 | 中 | ❌ |
| 阶段9: 清理提交 | 15分钟 | 低 | ❌ |
| **总计** | **3小时20分钟** | - | - |

**实际执行**: 
- 顺序执行: ~3.5小时
- 并行优化: ~2.5小时 (阶段2-5并行)

---

## 💡 执行建议

### 推荐执行策略

1. **一次性执行** (推荐给有经验的开发者)
   - 预留3小时完整时间
   - 按阶段顺序执行
   - 每个阶段完成后验证

2. **分批执行** (推荐给新手)
   - 第1批: 阶段1-2 (准备+核心迁移, 45分钟)
   - 第2批: 阶段3-4 (清理+归档, 50分钟)
   - 第3批: 阶段5-6 (新建+更新, 70分钟)
   - 第4批: 阶段7-9 (规则+验证, 55分钟)

3. **增量执行** (最保守)
   - 每天执行1-2个阶段
   - 每次执行后提交Git
   - 充分测试后再继续

### 注意事项

1. **不要跳过备份步骤** - 这是安全网
2. **逐步提交Git** - 不要等到全部完成才提交
3. **保持沟通** - 如果是团队项目,通知其他成员
4. **测试AI行为** - 规则更新后务必测试

---

## 📞 支持与帮助

如果在执行过程中遇到问题:

1. **查看备份**: 可以随时回滚
2. **检查文件清单**: 对比前后差异
3. **验证链接**: 使用markdown-link-check
4. **测试AI**: 发送测试请求验证规则

---

## 📅 执行时间建议

**推荐执行时间**:
- 周五下午 (有问题可以周末处理)
- 或周一上午 (避免周五部署)
- 避免项目紧急期

**团队协调**:
- 提前通知团队成员
- 选择代码提交较少的时段
- 预留1-2天观察期

---

**计划状态**: 📋 待审核  
**下一步**: 审核通过后,创建执行分支并开始阶段1

**审核要点**:
1. ✅ 是否同意目标结构?
2. ✅ 是否同意归档策略 (而非删除)?
3. ✅ 是否同意执行时间估算?
4. ✅ 是否需要调整某些细节?

---

**创建时间**: 2026-01-11  
**创建者**: CodeBuddy AI  
**版本**: v1.0
