# cLLM åˆ†é˜¶æ®µé›†æˆæµ‹è¯• - å¿«é€ŸæŒ‡å—

**ç‰ˆæœ¬**: v1.0  
**åˆ›å»ºæ—¶é—´**: 2026-01-11  

---

## ğŸ¯ æ–¹æ¡ˆæ¦‚è§ˆ

| é¡¹ç›® | æ•°å€¼ | è¯´æ˜ |
|------|------|------|
| **æµ‹è¯•é˜¶æ®µ** | 5 ä¸ª | Phase 0-5ï¼Œæ¸è¿›å¼æ‰©å±• |
| **æµ‹è¯•ä»»åŠ¡** | 72 ä¸ª | ç»†ç²’åº¦æ‹†åˆ†ï¼Œ15-120åˆ†é’Ÿ/ä»»åŠ¡ |
| **Agent æ•°é‡** | 7 ä¸ª | ä¸“ä¸šè§’è‰²åˆ†å·¥ |
| **ä¸²è¡Œæ—¶é—´** | 74 å°æ—¶ | å•äººæ‰§è¡Œ |
| **å¹¶è¡Œæ—¶é—´** | 23 å°æ—¶ | 7äººå¹¶è¡Œæ‰§è¡Œ |
| **åŠ é€Ÿæ¯”** | 3.2x | å¤§å¹…æå‡æ•ˆç‡ |

---

## ğŸ“š æ–‡æ¡£ç´¢å¼•

### æ ¸å¿ƒæ–‡æ¡£

1. **åˆ†é˜¶æ®µé›†æˆæµ‹è¯•æ–¹æ¡ˆ.md** (3000+ è¡Œ) â­
   - å®Œæ•´çš„æµ‹è¯•æ–¹æ¡ˆè®¾è®¡
   - æ¨¡å—è§£è€¦ç­–ç•¥
   - å¹¶è¡ŒåŒ–è®¾è®¡
   - 72 ä¸ªä»»åŠ¡è¯¦ç»†è¯´æ˜
   
2. **Agentä»»åŠ¡åˆ†é…è¡¨.md** (800+ è¡Œ) â­
   - 7 ä¸ª Agent è¯¦ç»†åˆ†å·¥
   - ä»»åŠ¡æ—¶é—´è¡¨
   - ä¾èµ–å…³ç³»å›¾
   - è¿›åº¦è·Ÿè¸ªæ¨¡æ¿

3. **é›†æˆæµ‹è¯•æ–¹æ¡ˆ.md** (åŸæœ‰æ–‡æ¡£)
   - åŸæœ‰çš„é›†æˆæµ‹è¯•æ–¹æ¡ˆ
   - ä½œä¸ºè¡¥å……å‚è€ƒ

### æ‰§è¡Œè„šæœ¬

1. **scripts/parallel_test_runner.sh** â­
   - ä¸»æµ‹è¯•æ‰§è¡Œè„šæœ¬
   - æ”¯æŒåˆ†é˜¶æ®µè¿è¡Œ
   - è‡ªåŠ¨ç”ŸæˆæŠ¥å‘Š

2. **scripts/generate_test_data.py** â­
   - æµ‹è¯•æ•°æ®ç”Ÿæˆå™¨
   - ç”Ÿæˆ5ç±»æµ‹è¯•æ•°æ®

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒå‡†å¤‡

```bash
# è®¾ç½®æ¨¡å‹è·¯å¾„ï¼ˆå¯é€‰ï¼Œç”¨äºé›†æˆæµ‹è¯•ï¼‰
export CLLM_TEST_MODEL_PATH=/path/to/qwen3-model

# ç”Ÿæˆæµ‹è¯•æ•°æ®
python3 scripts/generate_test_data.py

# ç¼–è¯‘æµ‹è¯•ç¨‹åº
cd build
cmake .. -DUSE_TOKENIZERS_CPP=ON -DBUILD_TESTS=ON
make -j8 all_tests
cd ..
```

---

### 2. è¿è¡Œæµ‹è¯•

#### è¿è¡Œæ‰€æœ‰æµ‹è¯•

```bash
./scripts/parallel_test_runner.sh all
```

#### åˆ†é˜¶æ®µè¿è¡Œ

```bash
# Phase 0: å‡†å¤‡é˜¶æ®µ
./scripts/parallel_test_runner.sh 0

# Phase 1: å•å…ƒæµ‹è¯•
./scripts/parallel_test_runner.sh 1

# Phase 2: æ¨¡å—é›†æˆæµ‹è¯•
./scripts/parallel_test_runner.sh 2

# Phase 3: å­ç³»ç»Ÿæµ‹è¯•
./scripts/parallel_test_runner.sh 3

# Phase 4: ç³»ç»Ÿé›†æˆæµ‹è¯•
./scripts/parallel_test_runner.sh 4

# Phase 5: E2E åœºæ™¯æµ‹è¯•
./scripts/parallel_test_runner.sh 5
```

---

### 3. æŸ¥çœ‹ç»“æœ

```bash
# æŸ¥çœ‹æ—¥å¿—
ls logs/

# æŸ¥çœ‹æµ‹è¯•æŠ¥å‘Š
cat test_reports/test_report_*.md

# æŸ¥çœ‹ JSON ç»“æœ
cat logs/*.json
```

---

## ğŸ“‹ æµ‹è¯•é˜¶æ®µ

### Phase 0: å‡†å¤‡é˜¶æ®µ (1h)
- ä¸‹è½½/æ£€æŸ¥ Qwen3 æ¨¡å‹
- ç”Ÿæˆæµ‹è¯•æ•°æ®
- é…ç½®ç¯å¢ƒ
- ç¼–è¯‘æµ‹è¯•ç¨‹åº

### Phase 1: å•å…ƒæµ‹è¯• (3h, 5æ¨¡å—å¹¶è¡Œ)
- HTTP Server å•å…ƒæµ‹è¯•
- HFTokenizer å•å…ƒæµ‹è¯•
- ModelExecutor å•å…ƒæµ‹è¯•
- LibTorch Backend å•å…ƒæµ‹è¯•
- Qwen3 æ¨¡å‹å•å…ƒæµ‹è¯•

### Phase 2: æ¨¡å—é›†æˆæµ‹è¯• (4h, 4ç»„å¹¶è¡Œ)
- HTTP + Tokenizer é›†æˆ
- Tokenizer + Executor é›†æˆ
- Executor + Backend é›†æˆ
- Backend + Qwen3 é›†æˆ

### Phase 3: å­ç³»ç»Ÿæµ‹è¯• (5h, 3ç»„å¹¶è¡Œ)
- å‰ç«¯å­ç³»ç»Ÿ (HTTP + Tokenizer)
- æ¨ç†å­ç³»ç»Ÿ (Executor + Backend + Qwen3)
- E2E å­ç³»ç»Ÿ (å®Œæ•´é“¾è·¯)

### Phase 4: ç³»ç»Ÿé›†æˆæµ‹è¯• (8h, 3ç»„å¹¶è¡Œ)
- ç³»ç»ŸåŠŸèƒ½æµ‹è¯•
- æ€§èƒ½åŸºå‡†æµ‹è¯•
- å‹åŠ›å’Œç¨³å®šæ€§æµ‹è¯•

### Phase 5: E2E åœºæ™¯æµ‹è¯• (2h)
- å•è½®é—®ç­”åœºæ™¯
- å¤šè½®å¯¹è¯åœºæ™¯
- ä¸“ä¸šä»»åŠ¡åœºæ™¯ (ä»£ç ã€æ‘˜è¦ã€ç¿»è¯‘)
- è´¨é‡è¯„ä¼°

---

## ğŸ‘¥ Agent åˆ†å·¥

| Agent | è§’è‰² | ä¸»è¦èŒè´£ | å·¥æ—¶ | ä»»åŠ¡æ•° |
|-------|------|----------|------|--------|
| **Agent-1** | HTTP ä¸“å®¶ | HTTP Server ç›¸å…³æµ‹è¯• | 10h | 12 |
| **Agent-2** | Tokenizer ä¸“å®¶ | HFTokenizer ç›¸å…³æµ‹è¯• | 8h | 12 |
| **Agent-3** | Executor ä¸“å®¶ | ModelExecutor ç›¸å…³æµ‹è¯• | 10h | 12 |
| **Agent-4** | Backend ä¸“å®¶ | LibTorch + Qwen3 æµ‹è¯• | 12h | 15 |
| **Agent-5** | é›†æˆä¸“å®¶ | å­ç³»ç»Ÿé›†æˆæµ‹è¯• | 10h | 8 |
| **Agent-6** | åŠŸèƒ½æµ‹è¯• | ç³»ç»ŸåŠŸèƒ½ + E2E æµ‹è¯• | 12h | 8 |
| **Agent-7** | æ€§èƒ½ä¸“å®¶ | æ€§èƒ½ + å‹åŠ›æµ‹è¯• | 14h | 8 |

---

## ğŸ”§ æ ¸å¿ƒç‰¹æ€§

### 1. æ¨¡å—è§£è€¦

**æ¥å£æŠ½è±¡**:
- `ITokenizer` - åˆ†è¯å™¨æ¥å£
- `IModelExecutor` - æ¨¡å‹æ‰§è¡Œå™¨æ¥å£
- `IInferenceBackend` - æ¨ç†åç«¯æ¥å£
- `IHTTPHandler` - HTTP å¤„ç†å™¨æ¥å£

**Mock å¯¹è±¡**:
- `MockTokenizer` - æ¨¡æ‹Ÿåˆ†è¯å™¨
- `MockModelExecutor` - æ¨¡æ‹Ÿæ‰§è¡Œå™¨
- `MockBackend` - æ¨¡æ‹Ÿåç«¯
- `MockHTTPHandler` - æ¨¡æ‹Ÿ HTTP

**ä¼˜åŠ¿**:
- âœ… ç‹¬ç«‹æµ‹è¯•æ¯ä¸ªæ¨¡å—
- âœ… å¿«é€Ÿåé¦ˆï¼ˆä¸ä¾èµ–çœŸå®ç»„ä»¶ï¼‰
- âœ… æ˜“äºç»´æŠ¤å’Œæ‰©å±•

---

### 2. å¹¶è¡ŒåŒ–è®¾è®¡

**é˜¶æ®µå†…å¹¶è¡Œ**:
- Phase 1: 5 ä¸ªæ¨¡å—å®Œå…¨å¹¶è¡Œ
- Phase 2: 4 ä¸ªé›†æˆç»„éƒ¨åˆ†å¹¶è¡Œ
- Phase 3: 3 ä¸ªå­ç³»ç»Ÿå¹¶è¡Œ
- Phase 4: 3 ä¸ªæµ‹è¯•ç»„å¹¶è¡Œ

**è·¨é˜¶æ®µå¹¶è¡Œ**:
- æ—©æœŸå®Œæˆçš„ä»»åŠ¡å¯æå‰å¯åŠ¨ä¸‹ä¸€é˜¶æ®µ
- åŠ¨æ€ä»»åŠ¡é˜Ÿåˆ—ç®¡ç†
- è‡ªåŠ¨ä¾èµ–æ£€æŸ¥

**å·¥å…·æ”¯æŒ**:
- GNU parallelï¼ˆæ¨èï¼‰
- GoogleTest å¹¶å‘æµ‹è¯•
- è‡ªå®šä¹‰è„šæœ¬

---

### 3. ç»†ç²’åº¦ä»»åŠ¡

**ä»»åŠ¡ç‰¹ç‚¹**:
- æ¯ä¸ªä»»åŠ¡ 15-120 åˆ†é’Ÿ
- æ¸…æ™°çš„éªŒæ”¶æ ‡å‡†
- æ˜ç¡®çš„ä¾èµ–å…³ç³»
- ç‹¬ç«‹å¯æ‰§è¡Œ

**ä»»åŠ¡åˆ†å¸ƒ**:
- å•å…ƒæµ‹è¯•: 19 ä¸ªä»»åŠ¡
- æ¨¡å—é›†æˆ: 16 ä¸ªä»»åŠ¡
- å­ç³»ç»Ÿæµ‹è¯•: 12 ä¸ªä»»åŠ¡
- ç³»ç»Ÿé›†æˆ: 16 ä¸ªä»»åŠ¡
- E2E åœºæ™¯: 4 ä¸ªä»»åŠ¡

---

## ğŸ“Š é¢„æœŸäº§å‡º

### æµ‹è¯•è¦†ç›–

| å±‚æ¬¡ | è¦†ç›–ç‡ç›®æ ‡ | è¯´æ˜ |
|------|-----------|------|
| **å•å…ƒæµ‹è¯•** | 80%+ | æ¯ä¸ªæ¨¡å—ç‹¬ç«‹éªŒè¯ |
| **é›†æˆæµ‹è¯•** | 70%+ | æ¨¡å—é—´æ¥å£éªŒè¯ |
| **ç³»ç»Ÿæµ‹è¯•** | 90%+ | å®Œæ•´æµç¨‹éªŒè¯ |
| **E2E æµ‹è¯•** | 95%+ | çœŸå®åœºæ™¯éªŒè¯ |

### æ€§èƒ½åŸºå‡†

| æŒ‡æ ‡ | ç›®æ ‡ | è¯´æ˜ |
|------|------|------|
| **ååé‡** | >100 tokens/s | å•è¯·æ±‚ |
| **P50 å»¶è¿Ÿ** | <50ms | ä¸­ä½æ•° |
| **P95 å»¶è¿Ÿ** | <100ms | 95åˆ†ä½ |
| **P99 å»¶è¿Ÿ** | <200ms | 99åˆ†ä½ |
| **å¹¶å‘** | 100+ | æ— é”™è¯¯ |
| **å†…å­˜** | <8GB | Qwen3-0.5B |

### æµ‹è¯•æŠ¥å‘Š

- æµ‹è¯•æ‰§è¡Œæ—¥å¿—
- æµ‹è¯•ç»“æœç»Ÿè®¡
- æ€§èƒ½åŸºå‡†æ•°æ®
- å¤±è´¥åˆ†ææŠ¥å‘Š
- æ”¹è¿›å»ºè®®

---

## ğŸ’¡ æœ€ä½³å®è·µ

### 1. æµ‹è¯•æ•°æ®ç®¡ç†

```bash
# ç”Ÿæˆæ ‡å‡†æµ‹è¯•æ•°æ®
python3 scripts/generate_test_data.py

# è‡ªå®šä¹‰æµ‹è¯•æ•°æ®
# ç¼–è¾‘ tests/data/test_cases.json
```

### 2. ç¯å¢ƒéš”ç¦»

```bash
# ä½¿ç”¨ç‹¬ç«‹çš„æµ‹è¯•ç¯å¢ƒ
export CLLM_ENV=test
export CLLM_TEST_MODEL_PATH=/path/to/test/model

# é¿å…å½±å“å¼€å‘ç¯å¢ƒ
```

### 3. å¢é‡æµ‹è¯•

```bash
# åªè¿è¡Œå¤±è´¥çš„æµ‹è¯•
./scripts/parallel_test_runner.sh 1 --rerun-failed

# åªè¿è¡Œç‰¹å®šæ¨¡å—
./build/bin/test_hf_tokenizer
```

### 4. æŒç»­é›†æˆ

```yaml
# .github/workflows/test.yml
- name: Run Unit Tests
  run: ./scripts/parallel_test_runner.sh 1

- name: Run Integration Tests
  run: ./scripts/parallel_test_runner.sh 2
```

---

## ğŸ› æ•…éšœæ’æŸ¥

### å¸¸è§é—®é¢˜

**Q1: æ¨¡å‹æœªæ‰¾åˆ°**
```bash
# è®¾ç½®æ­£ç¡®çš„æ¨¡å‹è·¯å¾„
export CLLM_TEST_MODEL_PATH=/path/to/qwen3
```

**Q2: ç¼–è¯‘é”™è¯¯**
```bash
# æ£€æŸ¥ tokenizers-cpp æ˜¯å¦å®‰è£…
ls third_party/tokenizers-cpp/

# é‡æ–°é…ç½® CMake
cd build
cmake .. -DUSE_TOKENIZERS_CPP=ON
```

**Q3: æµ‹è¯•å¤±è´¥**
```bash
# æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
cat logs/test_xxx.log

# å•ç‹¬è¿è¡Œæµ‹è¯•
./build/bin/test_xxx --gtest_filter=TestName
```

---

## ğŸ“ˆ è¿›åº¦è·Ÿè¸ª

### å®æ—¶ç›‘æ§

```bash
# æŸ¥çœ‹æµ‹è¯•è¿›åº¦
tail -f logs/test_progress.log

# ç»Ÿè®¡æµ‹è¯•ç»“æœ
grep -r "PASSED\|FAILED" logs/*.log
```

### è¿›åº¦æŠ¥å‘Š

å‚è€ƒ `docs/tests/Agentä»»åŠ¡åˆ†é…è¡¨.md` ä¸­çš„è¿›åº¦è·Ÿè¸ªè¡¨

---

## ğŸ¯ ä¸‹ä¸€æ­¥

1. **å‡†å¤‡é˜¶æ®µ**
   - [ ] ä¸‹è½½ Qwen3 æ¨¡å‹
   - [ ] ç”Ÿæˆæµ‹è¯•æ•°æ®
   - [ ] ç¼–è¯‘æµ‹è¯•ç¨‹åº

2. **æ‰§è¡Œæµ‹è¯•**
   - [ ] è¿è¡Œå•å…ƒæµ‹è¯•
   - [ ] è¿è¡Œé›†æˆæµ‹è¯•
   - [ ] è¿è¡Œç³»ç»Ÿæµ‹è¯•

3. **åˆ†æç»“æœ**
   - [ ] æŸ¥çœ‹æµ‹è¯•æŠ¥å‘Š
   - [ ] åˆ†æå¤±è´¥åŸå› 
   - [ ] æå‡ºæ”¹è¿›å»ºè®®

4. **æŒç»­æ”¹è¿›**
   - [ ] è¡¥å……æµ‹è¯•ç”¨ä¾‹
   - [ ] ä¼˜åŒ–æµ‹è¯•æ•ˆç‡
   - [ ] æ›´æ–°æµ‹è¯•æ–‡æ¡£

---

## ğŸ“ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜ï¼Œè¯·å‚è€ƒï¼š
- è¯¦ç»†æ–¹æ¡ˆ: `docs/tests/åˆ†é˜¶æ®µé›†æˆæµ‹è¯•æ–¹æ¡ˆ.md`
- ä»»åŠ¡åˆ†é…: `docs/tests/Agentä»»åŠ¡åˆ†é…è¡¨.md`
- åŸæœ‰æ–¹æ¡ˆ: `docs/tests/é›†æˆæµ‹è¯•æ–¹æ¡ˆ.md`

---

**æœ€åæ›´æ–°**: 2026-01-11  
**æ–‡æ¡£ç‰ˆæœ¬**: v1.0
